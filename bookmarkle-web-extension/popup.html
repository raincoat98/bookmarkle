<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>북마클</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="popup-card">
      <div id="loggedInContent" style="display: none">
        <header class="popup-header">
          <div class="brand-block">
            <div class="brand-icon" id="brandIcon" data-lucide="bookmark"></div>
            <div>
              <p class="brand-title">북마클</p>
            </div>
          </div>
          <div class="user-wrapper">
            <div id="userHeader" class="user-header" style="display: none">
              <div class="user-email-badge">
                <span id="userEmail"></span>
              </div>
              <div class="header-actions">
                <span id="statusBadge" class="status-badge"></span>
                <button id="menuBtn" class="menu-btn" title="메뉴">
                  <span id="menuIcon" data-lucide="more-vertical"></span>
                </button>
                <div
                  id="dropdownMenu"
                  class="dropdown-menu"
                  style="display: none"
                >
                  <button class="menu-item" id="menuUserInfo">
                    <span
                      class="menu-icon"
                      id="userIcon"
                      data-lucide="user"
                    ></span>
                    <span>사용자 정보</span>
                  </button>
                  <button class="menu-item" id="menuTheme">
                    <span
                      class="menu-icon"
                      id="themeIcon"
                      data-lucide="palette"
                    ></span>
                    <span id="themeText">라이트 모드</span>
                  </button>
                  <button class="menu-item" id="menuSettings" disabled>
                    <span
                      class="menu-icon"
                      id="settingsIcon"
                      data-lucide="settings"
                    ></span>
                    <span>설정</span>
                    <span class="coming-soon">(곧 제공)</span>
                  </button>
                  <button class="menu-item danger" id="menuLogout">
                    <span
                      class="menu-icon"
                      id="logoutIcon"
                      data-lucide="log-out"
                    ></span>
                    <span>로그아웃</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </header>

        <section class="field-group">
          <label class="field-label">현재 페이지</label>
          <div class="current-page-card">
            <input id="currentPageInput" type="text" readonly />
            <button id="copyUrlBtn" class="ghost-btn" type="button">
              복사
            </button>
          </div>
        </section>

        <section class="field-group">
          <label class="field-label">메모 <span>(선택사항)</span></label>
          <textarea
            id="memoTextarea"
            placeholder="이 페이지에 대한 메모를 작성하세요..."
          ></textarea>
        </section>

        <section class="field-group">
          <label class="field-label">컬렉션 <span>(선택사항)</span></label>
          <div class="collection-input-wrapper">
            <input
              id="collectionInput"
              type="text"
              placeholder="선택 없음"
              readonly
              autocomplete="off"
            />
            <div
              id="collectionDropdown"
              class="collection-dropdown"
              style="display: none"
            >
              <input
                id="collectionSearchInput"
                type="text"
                class="collection-search-input"
                placeholder="컬렉션 검색..."
                autocomplete="off"
              />
              <div
                id="collectionDropdownList"
                class="collection-dropdown-list"
              ></div>
              <div
                id="collectionCreateOption"
                class="collection-create-option"
                style="display: none"
              >
                <span
                  id="createIcon"
                  style="display: inline-block; margin-right: 4px"
                  data-lucide="plus"
                ></span
                ><span>새로 만들기: "</span><span id="newCollectionName"></span
                ><span>"</span>
              </div>
            </div>
            <button
              id="refreshCollectionsBtn"
              class="icon-btn"
              type="button"
              title="새로고침"
            >
              <span id="refreshIcon" data-lucide="rotate-ccw"></span>
            </button>
            <button
              id="newCollectionBtn"
              class="icon-btn"
              type="button"
              title="웹에서 컬렉션 관리"
            >
              <span id="plusIcon" data-lucide="plus"></span>
            </button>
          </div>
          <input type="hidden" id="selectedCollectionId" value="" />
        </section>

        <section class="field-group">
          <label class="field-label">태그 <span>(선택사항)</span></label>
          <input
            id="tagInput"
            type="text"
            placeholder="엔터로 태그 추가 (쉼표로 구분)"
          />
          <div id="tagList" class="tag-list"></div>
        </section>

        <button id="saveBookmarkBtn" class="primary-btn">북마크 저장</button>

        <div id="statusMessage" class="status-chip" style="display: none"></div>

        <footer class="footer-row">
          <button
            id="supportLink"
            class="text-link"
            type="button"
            disabled
            style="opacity: 0.5; cursor: not-allowed"
          >
            ★ 후원하기
          </button>
          <span class="divider">|</span>
          <button id="bugLink" class="text-link" type="button">
            버그 등록하기
          </button>
        </footer>
      </div>

      <div id="loginButtons" class="login-controls" style="display: flex">
        <button id="loginGoogleBtn" class="secondary-btn">
          Google로 로그인
        </button>
        <button id="loginEmailBtn" class="secondary-btn">
          이메일로 로그인
        </button>
      </div>

      <div id="loading" class="loading" style="display: none">로그인 중...</div>
    </div>

    <div id="userInfoModal" class="user-info-modal">
      <div class="user-info-modal-content">
        <button class="user-info-modal-close" id="modalCloseBtn">
          <span id="modalCloseIcon" data-lucide="x"></span>
        </button>
        <strong>사용자 정보:</strong>
        <div id="userDetails" style="margin-top: 15px"></div>
      </div>
    </div>

    <div id="collectionModal" class="collection-modal">
      <div class="collection-modal-content">
        <button class="collection-modal-close" id="collectionModalCloseBtn">
          <span id="collectionModalCloseIcon" data-lucide="x"></span>
        </button>
        <div class="collection-modal-title">새 컬렉션 만들기</div>
        <div style="margin-bottom: 12px">
          <label
            style="
              display: block;
              margin-bottom: 6px;
              font-size: 13px;
              color: rgba(255, 255, 255, 0.8);
            "
            >아이콘 (선택사항)</label
          >
          <input
            type="text"
            id="collectionModalIconInput"
            class="collection-modal-input"
            placeholder="이모지 아이콘을 입력하세요 (예: 📁)"
            autocomplete="off"
            maxlength="2"
            style="margin-bottom: 0"
          />
        </div>
        <div>
          <label
            style="
              display: block;
              margin-bottom: 6px;
              font-size: 13px;
              color: rgba(255, 255, 255, 0.8);
            "
            >이름</label
          >
          <input
            type="text"
            id="collectionModalInput"
            class="collection-modal-input"
            placeholder="컬렉션 이름을 입력하세요..."
            autocomplete="off"
          />
        </div>
        <div class="collection-modal-actions">
          <button
            id="collectionModalCancelBtn"
            class="collection-modal-btn collection-modal-btn-cancel"
          >
            취소
          </button>
          <button
            id="collectionModalCreateBtn"
            class="collection-modal-btn collection-modal-btn-create"
          >
            만들기
          </button>
        </div>
      </div>
    </div>

    <script src="lucide.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
